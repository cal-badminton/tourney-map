{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\Ryan\\\\Dropbox\\\\tourneymap\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Ryan\\\\Dropbox\\\\tourneymap\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\Ryan\\\\Dropbox\\\\tourneymap\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\Ryan\\\\Dropbox\\\\tourneymap\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\Ryan\\\\Dropbox\\\\tourneymap\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\Ryan\\\\Dropbox\\\\tourneymap\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"C:\\\\Users\\\\Ryan\\\\Dropbox\\\\tourneymap\\\\client\\\\src\\\\js\\\\Tourney.js\";\nimport React from 'react';\nimport Menu from './Menu.js';\nimport Map from './Map.js';\n\nvar Tourney =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Tourney, _React$Component);\n\n  function Tourney(props) {\n    var _this;\n\n    _classCallCheck(this, Tourney);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Tourney).call(this, props));\n    _this.id = atob(props.id);\n    _this.updateMap = _this.updateMap.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.updateTile = _this.updateTile.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleDrop = _this.handleDrop.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleClick = _this.handleClick.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.state = {\n      map: new Array(10).fill(new Array(18).fill([\"\", \"\", \"\", \"\"])),\n      menu: [\"\", \"\", \"\", \"\"],\n      row: 0,\n      col: 0\n    };\n    props.socket.emit('get tourney', {\n      name: _this.id\n    });\n    props.socket.on('load tourney', function (data) {\n      if (this.mounted) {\n        console.log(data);\n        this.updateMap(data.map);\n      }\n    }.bind(_assertThisInitialized(_assertThisInitialized(_this))));\n    props.socket.on('update tourney', function (data) {\n      if (this.mounted) {\n        console.log(data);\n        this.updateMap(data.map);\n      }\n    }.bind(_assertThisInitialized(_assertThisInitialized(_this))));\n    return _this;\n  }\n\n  _createClass(Tourney, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.mounted = true;\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.mounted = false;\n    }\n  }, {\n    key: \"updateMap\",\n    value: function updateMap(newMap) {\n      this.setState({\n        map: newMap\n      });\n    }\n  }, {\n    key: \"updateTile\",\n    value: function updateTile(row, col, type, title, info, highlight) {\n      var copy = this.state.map.slice();\n      copy[row][col] = [type, title, info, highlight];\n      this.setState({\n        map: copy,\n        menu: copy[row][col]\n      });\n      this.props.socket.emit(\"map tile\", {\n        id: this.id,\n        row: row,\n        col: col,\n        type: type,\n        title: title,\n        info: info,\n        highlight: highlight\n      });\n    }\n  }, {\n    key: \"handleDrop\",\n    value: function handleDrop(e) {\n      e.preventDefault();\n      var r1 = parseInt(e.dataTransfer.getData(\"row\"));\n      var c1 = parseInt(e.dataTransfer.getData(\"col\"));\n      var r2 = e.target.getAttribute(\"data-row\");\n      var c2 = e.target.getAttribute(\"data-col\");\n      var temp = this.state.map[r1][c1];\n      var copy = this.state.map.slice();\n      copy[r1][c1] = copy[r2][c2];\n      copy[r2][c2] = temp;\n      this.updateMap(copy);\n      var vals = this.state.map[r2][c2];\n      this.setState({\n        map: copy,\n        menu: vals,\n        row: r2,\n        col: c2\n      });\n      console.log(\"switched!\");\n      this.props.socket.emit(\"map switch\", {\n        id: this.id,\n        a: r1,\n        b: c1,\n        c: r2,\n        d: c2\n      });\n    }\n  }, {\n    key: \"handleClick\",\n    value: function handleClick(e) {\n      console.log(\"clicked!\");\n      console.log(e.target);\n      var row = e.target.getAttribute(\"data-row\");\n      var col = e.target.getAttribute(\"data-col\");\n      console.log(row);\n\n      if (row != null && col != null) {\n        var vals = this.state.map[row][col];\n        this.setState({\n          menu: vals,\n          row: row,\n          col: col\n        });\n      }\n    }\n  }, {\n    key: \"toggleTimer\",\n    value: function toggleTimer(row, col) {}\n  }, {\n    key: \"resetTimer\",\n    value: function resetTimer(row, col) {}\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"tourney\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, React.createElement(Menu, {\n        name: this.id,\n        type: this.state.menu[0],\n        title: this.state.menu[1],\n        info: this.state.menu[2],\n        highlight: this.state.menu[3],\n        row: this.state.row,\n        col: this.state.col,\n        updateTile: this.updateTile,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, React.createElement(Map, {\n        map: this.state.map,\n        handleDrop: this.handleDrop,\n        handleClick: this.handleClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return Tourney;\n}(React.Component);\n\nexport default Tourney;","map":{"version":3,"sources":["C:\\Users\\Ryan\\Dropbox\\tourneymap\\client\\src\\js\\Tourney.js"],"names":["React","Menu","Map","Tourney","props","id","atob","updateMap","bind","updateTile","handleDrop","handleClick","state","map","Array","fill","menu","row","col","socket","emit","name","on","data","mounted","console","log","newMap","setState","type","title","info","highlight","copy","slice","e","preventDefault","r1","parseInt","dataTransfer","getData","c1","r2","target","getAttribute","c2","temp","vals","a","b","c","d","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport Menu from './Menu.js';\r\nimport Map from './Map.js';\r\n\r\nclass Tourney extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.id = atob(props.id);\r\n    this.updateMap = this.updateMap.bind(this);\r\n    this.updateTile = this.updateTile.bind(this);\r\n    this.handleDrop = this.handleDrop.bind(this);\r\n    this.handleClick = this.handleClick.bind(this);\r\n    this.state = {\r\n      map: new Array(10).fill(new Array(18).fill([\"\", \"\", \"\", \"\"])),\r\n      menu: [\"\", \"\", \"\", \"\"],\r\n      row: 0,\r\n      col: 0\r\n    };\r\n\r\n    props.socket.emit('get tourney', {name: this.id});\r\n\r\n    props.socket.on('load tourney', function(data) {\r\n      if (this.mounted) {\r\n        console.log(data);\r\n        this.updateMap(data.map);\r\n      }\r\n    }.bind(this));\r\n\r\n    props.socket.on('update tourney', function(data) {\r\n      if (this.mounted) {\r\n        console.log(data);\r\n        this.updateMap(data.map);\r\n      }\r\n    }.bind(this));\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.mounted = true;\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.mounted = false;\r\n  }\r\n\r\n  updateMap(newMap) {\r\n    this.setState({map: newMap});\r\n  }\r\n\r\n  updateTile(row, col, type, title, info, highlight) {\r\n    let copy = this.state.map.slice();\r\n    copy[row][col] = [type, title, info, highlight];\r\n    this.setState({map: copy, menu: copy[row][col]});\r\n    this.props.socket.emit(\"map tile\", {id: this.id, row: row, col: col, type: type, title: title, info: info, highlight: highlight});\r\n  }\r\n\r\n  handleDrop(e) {\r\n    e.preventDefault();\r\n    let r1 = parseInt(e.dataTransfer.getData(\"row\"));\r\n    let c1 = parseInt(e.dataTransfer.getData(\"col\"));\r\n    let r2 = e.target.getAttribute(\"data-row\");\r\n    let c2 = e.target.getAttribute(\"data-col\");\r\n    let temp = this.state.map[r1][c1];\r\n    let copy = this.state.map.slice();\r\n    copy[r1][c1] = copy[r2][c2];\r\n    copy[r2][c2] = temp;\r\n    this.updateMap(copy);\r\n    let vals = this.state.map[r2][c2];\r\n    this.setState({map: copy, menu: vals, row: r2, col: c2});\r\n    console.log(\"switched!\");\r\n    this.props.socket.emit(\"map switch\", {id: this.id, a: r1, b: c1, c: r2, d:c2});\r\n  }\r\n\r\n  handleClick(e) {\r\n    console.log(\"clicked!\");\r\n    console.log(e.target);\r\n    let row = e.target.getAttribute(\"data-row\");\r\n    let col = e.target.getAttribute(\"data-col\");\r\n    console.log(row);\r\n    if (row != null && col != null) {\r\n      let vals = this.state.map[row][col];\r\n      this.setState({menu: vals, row: row, col: col});\r\n    }\r\n  }\r\n\r\n  toggleTimer(row, col) {\r\n\r\n  }\r\n\r\n  resetTimer(row, col) {\r\n    \r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"tourney\">\r\n        <Menu name={this.id} type={this.state.menu[0]}\r\n          title={this.state.menu[1]} info={this.state.menu[2]} highlight={this.state.menu[3]}\r\n            row={this.state.row} col={this.state.col} updateTile={this.updateTile} />\r\n        <div>\r\n          <Map map={this.state.map} handleDrop={this.handleDrop} handleClick={this.handleClick} />\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Tourney;\r\n"]},"metadata":{},"sourceType":"module"}